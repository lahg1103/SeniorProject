{% extends "base.html" %}

{% block content %}

<style>
/* PRINT LAYOUT */
.print-wrapper {
    max-width: 800px;
    margin: 0 auto;
    padding: 2rem;
    color: black;
    background: white;
}

.print-wrapper h1,
.print-wrapper h2,
.print-wrapper h3 {
    color: black;
}

.print-section {
    margin-bottom: 2rem;
    border-bottom: 1px solid #ccc;
    padding-bottom: 1.5rem;
}

.print-activity {
    margin-bottom: 1rem;
}

.print-meta {
    font-size: 0.9rem;
    margin-bottom: 1rem;
    opacity: 0.7;
}

@media print {
    a {
        color: black !important;
        text-decoration: underline !important;
    }
}
</style>

<div class="print-wrapper">

    <h1>{{ existingPreferences.destination }} Itinerary</h1>

    <p class="print-meta">
        Itinerary ID: <strong>{{ itinerary_id }}</strong><br>
        Generated: {{ timestamp }}<br>
        Online Version: {{ permalink }}
    </p>

    <h2>{{ results.promotionalblurb }}</h2>

    {% for day in results.itineraryperday %}
    <div class="print-section">
        <h3>Day {{ loop.index }}</h3>
        <p>{{ day.daysummary }}</p>

        <!-- Lodging -->
        <div class="print-activity">
            <strong>Lodging:</strong><br>
            {{ day.lodging.name }}<br>
            {{ day.lodging.address }}<br>
            Cost: {{ day.lodging.cost }}
        </div>

        <!-- Morning -->
        {% set m = day.timeblocks.morning[0] %}
        <div class="print-activity">
            <strong>Morning — {{ m.time }}</strong><br>
            {{ m.name }}<br>
            {{ m.address }}<br>
            Cost: {{ m.cost }}<br>
            <em>{{ m.summary }}</em>
        </div>

        <div class="print-activity">
            <strong>Breakfast:</strong><br>
            {{ day.food.breakfast.restaurant }} — {{ day.food.breakfast.cost }}
        </div>

        <!-- Afternoon -->
        {% set a = day.timeblocks.afternoon[0] %}
        <div class="print-activity">
            <strong>Afternoon — {{ a.time }}</strong><br>
            {{ a.name }}<br>
            {{ a.address }}<br>
            Cost: {{ a.cost }}<br>
            <em>{{ a.summary }}</em>
        </div>

        <div class="print-activity">
            <strong>Lunch:</strong><br>
            {{ day.food.lunch.restaurant }} — {{ day.food.lunch.cost }}
        </div>

        <!-- Evening -->
        {% set e = day.timeblocks.evening[0] %}
        <div class="print-activity">
            <strong>Evening — {{ e.time }}</strong><br>
            {{ e.name }}<br>
            {{ e.address }}<br>
            Cost: {{ e.cost }}<br>
            <em>{{ e.summary }}</em>
        </div>

        <div class="print-activity">
            <strong>Dinner:</strong><br>
            {{ day.food.dinner.restaurant }} — {{ day.food.dinner.cost }}
        </div>

    </div>
    {% endfor %}

</div>

{% endblock %}
