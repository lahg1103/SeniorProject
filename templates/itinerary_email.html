{% extends "base.html" %}

{% block content %}

<style>
.email-wrapper {
    max-width: 700px;
    margin: 0 auto;
    background: #ffffff10;
    padding: 2rem;
    border-radius: 16px;
}

.email-header {
    font-size: 2rem;
    text-align: center;
}

.email-subtitle {
    font-size: 1.2rem;
    opacity: 0.9;
    text-align: center;
    margin-bottom: 2rem;
}

.email-section {
    margin-bottom: 2rem;
    padding: 1.2rem;
    background: rgba(255,255,255,0.06);
    border-radius: 12px;
}

.email-section h3 {
    margin-bottom: 0.5rem;
    color: white;
}

.email-link {
    margin-top: 2rem;
    font-size: 1.1rem;
    text-align: center;
}
.email-link a {
    color: #8dcaff;
}
</style>

<div class="email-wrapper">

    <h1 class="email-header">{{ existingPreferences.destination }} Itinerary</h1>
    <p class="email-subtitle">{{ results.promotionalblurb }}</p>

    <p class="email-link">
        <strong>View full online itinerary:</strong><br>
        <a href="{{ permalink }}">{{ permalink }}</a>
    </p>

    <p class="email-link" style="opacity: 0.7;">
        Itinerary ID: {{ itinerary_id }}<br>
        Generated: {{ timestamp }}
    </p>

    {% for day in results.itineraryperday %}
    <div class="email-section">
        <h3>Day {{ loop.index }}</h3>
        <p>{{ day.daysummary }}</p>

        <strong>Lodging:</strong><br>
        {{ day.lodging.name }} — {{ day.lodging.cost }}<br><br>

        {% set m = day.timeblocks.morning[0] %}
        <strong>Morning:</strong> {{ m.name }} ({{ m.time }})<br>
        <em>{{ m.summary }}</em><br><br>

        <strong>Breakfast:</strong> {{ day.food.breakfast.restaurant }} — {{ day.food.breakfast.cost }}<br><br>

        {% set a = day.timeblocks.afternoon[0] %}
        <strong>Afternoon:</strong> {{ a.name }} ({{ a.time }})<br>
        <em>{{ a.summary }}</em><br><br>

        <strong>Lunch:</strong> {{ day.food.lunch.restaurant }} — {{ day.food.lunch.cost }}<br><br>

        {% set e = day.timeblocks.evening[0] %}
        <strong>Evening:</strong> {{ e.name }} ({{ e.time }})<br>
        <em>{{ e.summary }}</em><br><br>

        <strong>Dinner:</strong> {{ day.food.dinner.restaurant }} — {{ day.food.dinner.cost }}
    </div>
    {% endfor %}

</div>

{% endblock %}
